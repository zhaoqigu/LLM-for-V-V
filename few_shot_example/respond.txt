// This file is generated from the provided Umple model

-- PLEASE DO NOT EDIT THIS CODE --
-- This code is auto-generated using the UMPLE modeling language --

-- NuSMV module for LoanState --
MODULE LoanState

  -- Declaring state variables for LoanState
  VAR
    state : { State_Initial, State_Outstanding, State_Recalled, State_Overdue, State_Returned, State_Lost };
    event : { ev_extend, ev_returnitem, ev_recall, ev_deadline, ev_declareLost, ev_null };
    deadline : integer;
    loanStartTime : integer;

  -- Define macros for transitions and conditions
  DEFINE
    state_stable := !(event = ev_extend | event = ev_returnitem | event = ev_recall | event = ev_deadline | event = ev_declareLost);
    t1 := event = ev_null & state = State_Initial;
    t2 := event = ev_extend & state = State_Outstanding;
    t3 := event = ev_returnitem & state = State_Outstanding;
    t4 := event = ev_recall & state = State_Outstanding;
    t5 := event = ev_deadline & state = State_Outstanding;
    t6 := event = ev_declareLost & state = State_Outstanding;
    t7 := event = ev_returnitem & state = State_Recalled;
    t8 := event = ev_deadline & state = State_Recalled;
    t9 := event = ev_declareLost & state = State_Recalled;
    t10 := event = ev_returnitem & state = State_Overdue;
    t11 := event = ev_declareLost & state = State_Overdue;
    t12 := event = ev_returnitem & state = State_Lost;

  -- Logic for state transitions
  ASSIGN
    init(state) := State_Initial;
    next(state) := case
      t1 : State_Outstanding;
      t2 : State_Outstanding;
      t3 : State_Returned;
      t4 : State_Recalled;
      t5 : State_Overdue;
      t6 : State_Lost;
      t7 : State_Returned;
      t8 : State_Overdue;
      t9 : State_Lost;
      t10 : State_Returned;
      t11 : State_Lost;
      t12 : State_Returned;
      TRUE : state;
    esac;

  -- Logic for event transitions
  ASSIGN
    init(event) := ev_null;
    next(event) := case
      state_stable : { ev_extend, ev_returnitem, ev_recall, ev_deadline, ev_declareLost };
      TRUE : ev_null;
    esac;

-- NuSMV module for LoanState_Machine --
MODULE LoanState_Machine

  -- State variables for the LoanState_Machine
  VAR
    loanState : LoanState;

-- NuSMV module for main --
MODULE main

  -- State variables for main
  VAR
    loanState_Machine : LoanState_Machine;

  -- Reachability properties for each state
  CTLSPEC EF (loanState_Machine.loanState.state = State_Initial)
  CTLSPEC EF (loanState_Machine.loanState.state = State_Outstanding)
  CTLSPEC EF (loanState_Machine.loanState.state = State_Recalled)
  CTLSPEC EF (loanState_Machine.loanState.state = State_Overdue)
  CTLSPEC EF (loanState_Machine.loanState.state = State_Returned)
  CTLSPEC EF (loanState_Machine.loanState.state = State_Lost)
